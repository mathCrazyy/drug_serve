# 函数计算（FC）环境变量配置位置 - 详细说明

## 📍 环境变量在哪里配置？

在函数计算的**函数配置页面**中配置环境变量。

## 🎯 详细操作步骤

### 第一步：进入函数详情页

1. **登录阿里云控制台**
   - 访问：https://fcnext.console.aliyun.com/
   - 或搜索"函数计算"

2. **找到你的服务**
   - 在左侧菜单点击"服务及函数"
   - 找到服务：`drug-serve-backend`（你创建的服务名称）
   - 点击服务名称进入服务详情

3. **找到你的函数**
   - 在服务详情页，找到函数：`drug-api`（你创建的函数名称）
   - 点击函数名称进入函数详情页

### 第二步：找到环境变量配置

在函数详情页，你会看到多个标签页：

```
函数详情页
├── 函数代码
├── 函数配置    ← 在这里！
├── 触发器
├── 监控
└── ...
```

**点击"函数配置"标签页**

### 第三步：配置环境变量

在"函数配置"页面中，向下滚动，你会看到：

```
函数配置
├── 基本信息
├── 环境变量    ← 在这里配置！
├── 高级配置
└── ...
```

**找到"环境变量"部分**

### 第四步：添加环境变量

1. **点击"环境变量"部分**
   - 你会看到一个表格或列表
   - 点击"添加"或"新增"按钮

2. **添加每个环境变量**
   
   需要添加以下环境变量：
   
   ```
   变量名：API_BASE_URL
   变量值：https://ark.cn-beijing.volces.com/api/v3
   ```
   
   ```
   变量名：API_KEY
   变量值：79de812b-68af-4513-bbc2-e158492797fe
   ```
   
   ```
   变量名：MODEL_ID
   变量值：你的模型ID（从test.py或.env文件中获取）
   ```
   
   ```
   变量名：DATABASE_URL
   变量值：sqlite:///./drugs.db
   ```
   
   ```
   变量名：UPLOAD_DIR
   变量值：/tmp/uploads
   ```
   
   ```
   变量名：MAX_FILE_SIZE
   变量值：10485760
   ```

3. **保存配置**
   - 添加完所有环境变量后
   - 点击"保存"或"确定"按钮

## 📸 界面位置示意图

```
阿里云控制台
└── 函数计算 FC
    └── 服务及函数
        └── drug-serve-backend（服务）
            └── drug-api（函数）
                └── 函数配置（标签页）
                    └── 环境变量（部分）
                        └── 添加按钮
```

## 🔍 如果找不到环境变量配置

### 方法 1: 检查函数类型

- **Web 函数**：环境变量在"函数配置" → "环境变量"
- **事件函数**：环境变量在"函数配置" → "环境变量"
- **自定义运行时**：环境变量在"函数配置" → "环境变量"

### 方法 2: 使用搜索功能

在函数详情页，使用浏览器的搜索功能（Ctrl+F 或 Cmd+F）搜索：
- "环境变量"
- "Environment Variables"
- "ENV"

### 方法 3: 查看帮助文档

如果界面不同，可能是：
- 控制台版本更新
- 不同地区的界面略有差异

可以：
- 查看页面上的"帮助"或"?"图标
- 访问函数计算帮助文档

## 📝 完整的环境变量列表

复制以下内容，在函数计算中逐一添加：

```env
API_BASE_URL=https://ark.cn-beijing.volces.com/api/v3
API_KEY=79de812b-68af-4513-bbc2-e158492797fe
MODEL_ID=你的模型ID（需要从test.py或.env文件中获取）
DATABASE_URL=sqlite:///./drugs.db
UPLOAD_DIR=/tmp/uploads
MAX_FILE_SIZE=10485760
```

**注意**：
- `API_KEY` 和 `MODEL_ID` 需要从你的 `backend/.env` 文件或 `test.py` 文件中获取
- 如果使用 OSS 存储，还需要添加 OSS 相关环境变量

## 🔐 如何获取 API_KEY 和 MODEL_ID

### 方法 1: 从本地 .env 文件

```bash
cd backend
cat .env
```

查看文件中的 `API_KEY` 和 `MODEL_ID` 值。

### 方法 2: 从 test.py 文件

如果你有 `test.py` 文件，打开查看：
```python
API_KEY = "79de812b-68af-4513-bbc2-e158492797fe"
MODEL_ID = "你的模型ID"
```

### 方法 3: 从 API_CONFIG_GUIDE.md

查看项目中的 `API_CONFIG_GUIDE.md` 文件，里面有详细说明。

## ✅ 配置完成后

1. **保存环境变量**
   - 确保所有环境变量都已添加
   - 点击"保存"

2. **验证配置**
   - 刷新页面
   - 确认环境变量列表显示正确

3. **测试函数**
   - 在函数详情页，点击"测试"或"调试"
   - 或通过 HTTP 触发器测试

## 🎯 快速定位步骤

1. 登录：https://fcnext.console.aliyun.com/
2. 左侧菜单：服务及函数
3. 点击服务：`drug-serve-backend`
4. 点击函数：`drug-api`
5. 顶部标签：**函数配置**
6. 页面内容：**环境变量**（向下滚动）
7. 点击：**添加** 或 **新增**

---

**按照以上步骤，就能找到并配置环境变量了！** 🚀

