# 药品识别与提醒系统

一个基于豆包 API 的药品信息识别和管理系统，支持通过拍照或上传图片识别药品信息，并提供过期提醒功能。
“本项目由阿里云ESA提供加速、计算和保护”以及附右图➡️
## 功能特性

- 📸 支持手机拍照或本地上传多张药品图片
- 🤖 通过豆包 API 自动识别药品名称、生产日期、有效期
- ⏰ 智能提醒：即将过期和已过期药品标识
- 📱 响应式设计，支持移动端和桌面端

## 技术栈

- 前端：React 18 + TypeScript + Vite + Tailwind CSS
- 后端：FastAPI (Python) + SQLite
- AI 服务：豆包 API

## 项目结构

```
drug_serve/
├── frontend/          # 前端项目
├── backend/           # 后端项目
└── README.md
```

## 安装与运行

### 后端设置

1. 进入后端目录：
```bash
cd backend
```

2. 创建虚拟环境：
```bash
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
```

3. 安装依赖：
```bash
pip install -r requirements.txt
```

4. 配置环境变量：
```bash
cp .env.example .env
# 编辑 .env 文件，填入豆包 API 配置
```

5. 运行后端服务：
```bash
uvicorn app.main:app --reload
```

### 前端设置

1. 进入前端目录：
```bash
cd frontend
```

2. 安装依赖：
```bash
npm install
```

3. 运行开发服务器：
```bash
npm run dev
```

## 快速开始

### 使用启动脚本

**后端：**
```bash
cd backend
./start.sh
```

**前端：**
```bash
cd frontend
./start.sh
```

### 手动启动

参考上面的"安装与运行"部分。

## 配置说明

### 后端环境变量 (.env)

```env
# 豆包 API 配置
API_BASE_URL=https://ark.cn-beijing.volces.com/api/v3
API_KEY=your-api-key-here
MODEL_ID=your-model-id-here

# 数据库配置
DATABASE_URL=sqlite:///./drugs.db

# 上传文件配置
UPLOAD_DIR=uploads
MAX_FILE_SIZE=10485760  # 10MB
```

### 前端环境变量

开发环境会自动使用代理，生产环境需要配置 `VITE_API_BASE_URL`。

## 功能说明

1. **图片上传**：支持多张图片同时上传，支持拖拽上传和手机拍照
2. **智能识别**：自动识别药品名称、生产日期、有效期
3. **过期提醒**：
   - 🟢 正常：距离过期 > 30 天
   - 🟡 即将过期：距离过期 ≤ 30 天
   - 🔴 已过期：已超过有效期
4. **药品管理**：查看、筛选、删除药品记录

## 部署

详细部署指南请参考 [DEPLOY.md](./DEPLOY.md)

### GitHub 部署

前端可以部署到 GitHub Pages 或 Vercel。

### 阿里云 ECS 部署

1. 将代码推送到 GitHub
2. 在 ECS 上克隆仓库
3. 配置 Nginx 反向代理
4. 使用 systemd 或 Docker 运行后端服务

详细步骤请参考 `DEPLOY.md` 文件。

## API 文档

后端服务运行后，访问 `http://localhost:8000/docs` 查看 Swagger API 文档。

## 注意事项

1. **豆包 API 配置**：需要在 `.env` 文件中配置正确的 `API_KEY` 和 `MODEL_ID`
2. **模型 ID**：请根据实际使用的豆包模型 ID 进行配置
3. **图片大小**：默认最大支持 10MB，可在 `.env` 中修改 `MAX_FILE_SIZE`
4. **生产环境**：建议修改 CORS 配置，限制允许的域名

## 许可证

MIT

